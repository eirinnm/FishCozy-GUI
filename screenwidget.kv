#:kivy 1.9.0
#:import math math



           
 
# <LineCircle1@Widget>:
#     canvas:

      
#         Color:
#             rgba: 51/255, 164/255, 208/255, 1
#         Line:
#             width: 2.
#             circle:
#                 (self.center_x, self.center_y, min(self.height, self.height)/ 2.1)
        
#         Color:
#             rgba: 0.5, 0.5, 0.5, 1
#         Line:
#             width: 3.
#             circle:
#                 (self.center_x, self.center_y, min(self.height, self.height)/ 2.3 ,0 ,(root.currentTimeAngle))
        
   

<Toggle1@ToggleButton>:

    center: root.center
    size_hint: (1,1)
    background_color: (0.5,0.5,0.5,0.5)
    on_release: self.startStop()

    canvas:

        Color:
            rgba: 51/255, 164/255, 208/255, 0.2
        Line:
            width: 4
            circle:
                (self.center_x, self.center_y, min(self.height, self.height)/ 2.1, -10,-20)
        Color:
            rgba: 51/255, 164/255, 208/255, 0.5
        Line:
            width: 4
            circle:
                (self.center_x, self.center_y, min(self.height, self.height)/ 2.1,-25,-35)
        Color:
            rgba: 51/255, 164/255, 208/255, 1
        Line:
            width: 4
            circle:
                (self.center_x, self.center_y, min(self.height, self.height)/ 2.1,-40,-50)
        
    
        Color:
            rgba: 0.5, 0.5, 0.5, 1
        Line:
            width: 3.
            circle:
                (self.center_x, self.center_y, min(self.height, self.height)/ 2.3 ,0 ,(root.currentTimeAngle))

      
        Color:
            rgba: 51/255, 164/255, 208/255, 1
        Line:
            id: timePoint1Arc
            width: 4
            circle:
                (self.center_x, self.center_y, min(self.height, self.height)/ 2.1,0,self.setTimeAngle)

        
        Color:
            rgba: 255/255, 159/255, 54/255,1
        Line:
            id: timePoint2Arc
            width: 4
            circle:
                (self.center_x, self.center_y, min(self.height, self.height)/ 2.1,self.setTimeAngle,310)

    

        Color:
            rgba: self.tickmarckColor1    
        Ellipse:  
                               
            id: timePoint1
            size: 20,20
            pos: (root.center_x-10) + ((root.height/2-5)*math.cos(math.radians(-root.setTimeAngle+90))), (root.center_y-10) + ((root.height/2-5)*math.sin(math.radians(-self.setTimeAngle+90)))                    
        Color:
            rgba: self.tickmarckColor2
        Ellipse:           
            id: timePoint2
            size: 20,20
            pos: (root.center_x-10) + ((root.height/2-5)*math.cos(math.radians(-310+90))), (root.center_y-10) + ((root.height/2-5)*math.sin(math.radians(-310+90)))                                                    
        

        Color:
            id:powerLineColor
            rgba: (root.newColor)
        Rectangle:
            id: powerLine
            pos: (root.center_x, root.center_y + root.height/10 )
            size: (self.currentPower*50,10)
        Color:
            rgba: 1,1,1,1

        Rectangle:
            pos: (root.center_x, root.center_y + root.height/10 )
            size: (2,10)

            
    Label:
        id: onTimePoint2
        disabled: True
        markup: True
        center: 
            (root.center_x) + ((root.height/2-5)*math.cos(math.radians(-310+90))), (root.center_y) + ((root.height/2-5)*math.sin(math.radians(-310+90)))
        text:'T2'# str(root.setTemperature2)
            


    Label: 
        disabled: True
        id: running
        center:
            (root.center_x + root.height/2 -root.height/20), ((root.center_y + root. height/2 - root.height/12))
        text: ''

    Label:
        id: onTimePoint1
        
        markup: True
        center: 
            (root.center_x) + ((root.height/2-5)*math.cos(math.radians(-root.setTimeAngle+90))), (root.center_y) + ((root.height/2-5)*math.sin(math.radians(-root.setTimeAngle+90)))
        text: 'T1'#str(root.setTemperature)
            




        # Label:
        #     id: lapsedTime
        #     center: 
        #         (root.center_x+(self.width/2*root.labelOffsetX))  +((root.height/2-10)*math.cos(math.radians(-root.currentTimeAngle+90))), ((root.center_y) + ((root.height/2-10)*math.sin(math.radians(-root.currentTimeAngle+90))+(20*root.labelOffsetY)))
        #     text: f'lapsing minutes: ({root.lapsedTime//60})'


        RelativeLayout:
            orientation: 'vertical'
            center: root.center
            Label:
                id: currentTemp            
                markup: True       
                font_size: root.height/5 
                pos: 0,0
                text:'current T'
            Label:
                id: labelTime1     
                disabled:False
                size_hint: (1,.8)       
                markup: True       
                font_size: root.height/15 
                pos: 0,-root.height/10
                text: str(root.setTemperature) + '\xb0C, in ' + str(root.lapsedTime//(60*60)) +'h' + str(root.lapsedTime%(60*60)//60) + 'm' + str(root.lapsedTime%60) + 's'
                        
            Label:
                id: labelTime2            
                disabled:False
                size_hint: (1,.8)  
                markup: True       
                font_size: root.height/15 
                pos: 0,-root.height/5
                text: str(root.setTemperature2) + '\xb0C, in ' + str(root.lapsedTime2//(60*60)) +'h' + str(root.lapsedTime2%(60*60)//60) + 'm' + str(root.lapsedTime2%60) + 's'



<Slider@Slider>:
  

<Checkbox@CheckBox>:
            

<Starter@ToggleButton>:
    
    id: starterToggle
    text: self.text
    on_release: self.toggleValue()

<Edit@TButton>:
    disabled: True
    
    text: 'Edit Protocol'
    on_press: self.toggleValue()



<GeneralButton@Button>:



<MyPopup@Popup>:
    id:myPopup
    auto_bring_to_front: True
    size_hint: 1, 1
    auto_dismiss: False
    title: 'Edit Protocol'



############
    BoxLayout:
        orientation: 'vertical'


        
        #####################   CHECKBOX LIST    ##############
       # BoxLayout:
            # orientation: 'horizontal'

            # Label:
            #     id: 'selected'
            #     text: 'selected wells:'
            # BoxLayout:
            #     orientation: 'vertical'
            #     BoxLayout:
            #         orientation: 'horizontal'
            #         Checkbox
            #             id: check0
            #             active: app.root.ids.toggle0.toggled
            #         Checkbox
            #             id: check1
            #             active: app.root.ids.toggle1.toggled
            #         Checkbox
            #             id: check2
            #             active: app.root.ids.toggle2.toggled
            #     BoxLayout:
            #         orientation: 'horizontal'
            #         Checkbox
            #             id: check3
            #             active: app.root.ids.toggle3.toggled
            #         Checkbox
            #             id: check4
            #             active: app.root.ids.toggle4.toggled
            #         Checkbox
            #             id: check5
            #             active: app.root.ids.toggle5.toggled

######################   TIMEPOINT CONTROLLERS ########################
        Label:
            size_hint: 1,0.5
            text: 'Time point 1'  

        BoxLayout:
            orientation:'horizontal'        
            # Label:
            #     text: 'starting in:' 
            
            
            # Slider:
            #     id: time
            #     step: 5
            #     range: (0,360)
            # Label:
            #     id: timeofday
            #     text:  'protocol starting at:'+ str(root.displayedTimeDelta1)

           

            BoxLayout:                          ###### INCREASE DECREASE TIME HOURS ######
                orientation:'horizontal'
                size_hint:2,1
                padding: 5,10
                GeneralButton
                    size_hint : 1,1
                    text: '++'
                    on_press: root.increaseTimeHoursFive()
                GeneralButton
                    size_hint : 1,1
                    text: '+'
                    on_press: root.increaseTimeHours()
                Label:
                    markup: True
                    text: str(root.selectedHours1) + ' hours'
                GeneralButton        
                    size_hint : 1,1
                    text: '-'
                    on_press: root.decreaseTimeHours()
                GeneralButton        
                    size_hint : 1,1
                    text: '--'
                    on_press: root.decreaseTimeHoursFive()


            
            
            BoxLayout:                          ###### INCREASE DECREASE TIME Minutes ######
                orientation:'horizontal'
                padding: 5,10
                GeneralButton
                    size_hint : 1,1
                    text: '+'
                    on_press: root.increaseTimeMinute()
                Label:
                    text:  str(root.selectedMinutes1) +' minutes'
                GeneralButton        
                    size_hint : 1,1
                    text: '-'
                    on_press: root.decreaseTimeMinute()

            Label:
                size_hint: 0.5,1
                id: timeofday
                text:   'at  '+ str(root.displayedTimeDelta1)

        BoxLayout:
            orientation:'horizontal'
            Label:
                id: temperatureSlider
                text:'temperature: ' + str(temperature.value) + ' \xb0CC'
            Slider
                id: temperature
                step:1
                range: (5,40)



                ######### TimePoint2#############



        Label:
            size_hint: 1,0.5
            text: 'Time point 2'
        CheckBox:

            id: timePoint2Active
        BoxLayout:
            orientation:'horizontal'        
            id: timePoint2Panel
            disabled: (root.ids.timePoint2Active.active == False)

            BoxLayout:                          ###### INCREASE DECREASE TIME HOURS ######
                orientation:'horizontal'
                size_hint:2,1
                padding: 5,10
                GeneralButton
                    size_hint : 1,1
                    text: '++'
                    on_press: root.increaseTimeHoursFive2()
                GeneralButton
                    size_hint : 1,1
                    text: '+'
                    on_press: root.increaseTimeHours2()
                Label:
                    markup: True
                    text: str(root.selectedHours2) + ' hours'
                GeneralButton        
                    size_hint : 1,1
                    text: '-'
                    on_press: root.decreaseTimeHours2()
                GeneralButton        
                    size_hint : 1,1
                    text: '--'
                    on_press: root.decreaseTimeHoursFive2()


            
            
            BoxLayout:                          ###### INCREASE DECREASE TIME Minutes ######
                orientation:'horizontal'
                padding: 5,10
                GeneralButton
                    size_hint : 1,1
                    text: '+'
                    on_press: root.increaseTimeMinute2()
                Label:
                    text:  str(root.selectedMinutes2) +' minutes'
                GeneralButton        
                    size_hint : 1,1
                    text: '-'
                    on_press: root.decreaseTimeMinute2()

            Label:
                size_hint: 0.5,1
                id: timeofday2
                text:   'at  '+ str(root.displayedTimeDelta2)

        BoxLayout:
            orientation:'horizontal'
            id: timePoint2Slider
            disabled: (root.ids.timePoint2Active.active == False)
            Label:
                id: temperatureSlider2
                text:'temperature: ' + str(temperature2.value) + ' \xb0C'
            Slider
                id: temperature2
                step:1
                range: (5,40)

            #####EXP2############







                
        # Label:
        #     text: 'Time point 2'  

        # # BoxLayout:
          
        # #     orientation:'horizontal'     
    
        #     # Label:
        #     #     id: timeSlider2
        #     #     text:'timepoint 1 + ' + str(time2.value) + 'minutes'
        #     # Slider:
        #     #     id: time2
        #     #     step: 5
        #     #     range: (0,360)

        #     # Label:
        #     #     text: ' starting in T1 +' 
        #     Label:
        #         markup: True
        #         text: str(root.selectedHours2) + ' hours'

        #     BoxLayout:                          ###### INCREASE DECREASE TIME HOURS ######
        #         orientation:'vertical'
        #         GeneralButton
        #             size_hint : 0.2,1
        #             text: '+'
        #             on_press: root.increaseTimeHours2()
        #         GeneralButton        
        #             size_hint : 0.2,1
        #             text: '-'
        #             on_press: root.decreaseTimeHours2()

        #     Label:
        #         text:  str(root.selectedMinutes2) +' minutes'
            
        #     BoxLayout:                          ###### INCREASE DECREASE TIME Minutes ######
        #         orientation:'vertical'
                
        #         GeneralButton
        #             size_hint : 0.2,1
        #             text: '+'
        #             on_press: root.increaseTimeMinute2()
        #         GeneralButton        
        #             size_hint : 0.2,1
        #             text: '-'
        #             on_press: root.decreaseTimeMinute2()

        #     Label:
        #         id: timeofday2
        #         text:   'at  '+ str(root.displayedTimeDelta2)


       
        # BoxLayout:
        #     orientation:'horizontal'
        #     Label:
        #         id: temperatureSlider2
        #         text:'temperature: ' + str(temperature2.value) + ' \xb0C'
        #     Slider
        #         id: temperature2
        #         step: 5
        #         range: (5,40)
        #         value: 28        
##########################################
        BoxLayout:
            orientation:'horizontal'
            Button:
                text: 'Submit'
                on_press: root.submitPopup()
            Button:
                text: 'Cancel'
                on_press: root.closePopup()




<MySecondPopup@Popup>:
    auto_bring_to_front: True
    size_hint: .8, .5
    auto_dismiss: True
    title: 'Questions?'
    
    Label:
        id:secondPopUp
        markup: True 
        text:'We Do Not Have Any [b]Answers[/b] Either. Try With [b]42[/b].'


<StarterSwitch@Switch>:



<RootWidget>:

    BoxLayout:
    
        orientation:"vertical"
        

        BoxLayout:
            orientation: "horizontal"     
            Toggle1 :
                name: 'tog0'
                id:toggle0              
            Toggle1
                name: 'tog1'
                id:toggle1
            Toggle1
                name: 'tog2'
                id:toggle2         

        BoxLayout:
            orientation: "horizontal"
            Toggle1
                name: 'tog3'
                id:toggle3
            Toggle1
                name: 'tog4'
                id:toggle4
            Toggle1
                name: 'tog5'
                id:toggle5
                
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y:0.2

     
            Starter
                id: newStarter
            Edit            
                id: editToggle
            
            Label:
                id:currentTimeLabel
            GeneralButton:
                markup: True 
                size_hint: .2,1
                text: '[b]?[/b]'
                on_press: self.onQuestionAsked()